"use strict";(self["webpackChunkairstay"]=self["webpackChunkairstay"]||[]).push([[854],{2854:function(e,l,t){t.r(l),t.d(l,{default:function(){return me}});var a=t(6768),s=t(4232),o=t(5130),n=t(2009),r=t(784),i=t(263);const d=(0,a.Lk)("img",{src:n,alt:"Loading...",style:{width:"100px"}},null,-1),c={class:"container"},u={style:{display:"flex","align-items":"center"}},m=(0,a.Lk)("h3",{style:{"margin-left":"10px"}},"申請預定",-1),h={class:"my-5 row justify-content-center"},f={class:"mb-3"},k=(0,a.Lk)("label",{for:"name",class:"form-label"},"姓名",-1),p={class:"mb-3"},L=(0,a.Lk)("label",{for:"email",class:"form-label"},"電子信箱",-1),b={class:"mb-3"},v=(0,a.Lk)("label",{for:"tel",class:"form-label"},"聯絡電話",-1),g={class:"mb-3"},y=(0,a.Lk)("label",{for:"address",class:"form-label"},"聯絡地址",-1),x={class:"mb-3"},_=(0,a.Lk)("label",{for:"message",class:"form-label"},"特殊需求",-1),I={class:"text-end"},w=["disabled"],V=(0,a.Lk)("h3",null,"您的個訂房資訊",-1),C={class:"table"},F=(0,a.Lk)("th",null,"姓名：",-1),E=(0,a.Lk)("th",{width:"100"},"電子信箱：",-1),$=(0,a.Lk)("th",null,"聯絡電話：",-1),M=(0,a.Lk)("th",null,"聯絡地址：",-1),O=(0,a.Lk)("th",null,"特殊需求：",-1),R=(0,a.Lk)("th",null,"總金額：",-1),X={key:0},D={key:1},S=(0,a.Lk)("th",null,"付款狀態：",-1),Q={key:0},U={key:1,class:"text-success"},q=(0,a.Fv)('<h3>您想在甚麼時候付款?</h3><div class="form-check"><input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"><label class="form-check-label" for="flexRadioDefault1"> 延後付款 </label><p style="font-size:14px;"> AirStay將處理您的款項，我們將於幾日後自動從您所選的卡片扣款。 </p></div><div class="form-check"><input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked><label class="form-check-label" for="flexRadioDefault2"> 立即付款 </label><p style="font-size:14px;">您將在完成此預定時透過AirStay付款。</p></div><h3>您想要怎麼付款?</h3><div class="form-check" style="margin:10px;"><input type="radio" class="btn-check" name="options-outlined" id="success-outlined" autocomplete="off" checked><label class="btn btn-outline-secondary" for="success-outlined"><img src="'+r+'" alt="VISA" style="width:100px;"></label></div><div class="form-check" style="margin:10px;"><input type="radio" class="btn-check" name="options-outlined" id="danger-outlined" autocomplete="off"><label class="btn btn-outline-secondary" for="danger-outlined"><img src="'+i+'" alt="VISA" style="width:100px;"></label></div><div class="text-end"><button class="btn btn-danger">完成訂房 : 確認付款</button></div>',7),z={class:"col-md-5"},A={class:"sticky-top"},K={class:"col-8"},P=["src"],W=(0,a.Lk)("i",{class:"bi bi-star-fill"},null,-1),j={class:"table align-middle"},B=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"入住時間"),(0,a.Lk)("th",null,"退房時間"),(0,a.Lk)("th",null,"入住天數"),(0,a.Lk)("th",null,"房間數量")])],-1),J=(0,a.Lk)("td",null,"2024年12月21日",-1),G=(0,a.Lk)("td",null,"2024年12月22日",-1),H=(0,a.Lk)("td",null,"1 晚",-1),N=(0,a.Lk)("tfoot",null,null,-1),T={class:"input-group mb-3 input-group-sm"},Y={class:"input-group-append"},Z=["disabled"],ee={key:0,class:"spinner-border spinner-border-sm text-warning",role:"status"},le=(0,a.Lk)("span",{class:"visually-hidden"},"Loading...",-1),te=[le],ae={class:"table align-middle"},se={key:0,class:"text-success"},oe={class:"",style:{"font-weight":"bold","font-size":"18px"}},ne={key:1,class:"text-success",style:{"font-weight":"bold","font-size":"18px"}},re={key:2,style:{"font-weight":"bold","font-size":"18px"}};function ie(e,l,t,n,r,i){const le=(0,a.g2)("Loading"),ie=(0,a.g2)("Field"),de=(0,a.g2)("ErrorMessage"),ce=(0,a.g2)("Form");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(le,{active:r.isLoading},{default:(0,a.k6)((()=>[d])),_:1},8,["active"]),(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.Lk)("i",{class:"bi bi-arrow-left-circle",style:{"font-size":"25px",transition:"transform 0.2s ease-in-out"},onClick:l[0]||(l[0]=(...e)=>i.onclickReturn&&i.onclickReturn(...e)),onKeydown:l[1]||(l[1]=(...e)=>i.handleKeyDown&&i.handleKeyDown(...e)),onMouseover:l[2]||(l[2]=(...e)=>i.handleMouseEnter&&i.handleMouseEnter(...e)),onMouseout:l[3]||(l[3]=(...e)=>i.handleMouseLeave&&i.handleMouseLeave(...e)),onFocus:l[4]||(l[4]=(...e)=>i.handleMouseEnter&&i.handleMouseEnter(...e)),onBlur:l[5]||(l[5]=(...e)=>i.handleMouseLeave&&i.handleMouseLeave(...e))},null,32),m]),(0,a.Lk)("div",h,[r.isPayView?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(ce,{key:0,class:"col-md-6",onSubmit:i.createOrder},{default:(0,a.k6)((({errors:e})=>[(0,a.Lk)("div",f,[k,(0,a.bF)(ie,{id:"name",name:"姓名",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:r.form.user.name,"onUpdate:modelValue":l[6]||(l[6]=e=>r.form.user.name=e)},null,8,["class","modelValue"]),(0,a.bF)(de,{name:"姓名",class:"invalid-feedback"})]),(0,a.Lk)("div",p,[L,(0,a.bF)(ie,{id:"email",name:"email",type:"email",class:(0,s.C4)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入Email",rules:"email|required",modelValue:r.form.user.email,"onUpdate:modelValue":l[7]||(l[7]=e=>r.form.user.email=e)},null,8,["class","modelValue"]),(0,a.bF)(de,{name:"email",class:"invalid-feedback"})]),(0,a.Lk)("div",b,[v,(0,a.bF)(ie,{id:"tel",name:"電話",type:"tel",class:(0,s.C4)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:r.form.user.tel,"onUpdate:modelValue":l[8]||(l[8]=e=>r.form.user.tel=e)},null,8,["class","modelValue"]),(0,a.bF)(de,{name:"電話",class:"invalid-feedback"})]),(0,a.Lk)("div",g,[y,(0,a.bF)(ie,{id:"address",name:"地址",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:r.form.user.address,"onUpdate:modelValue":l[9]||(l[9]=e=>r.form.user.address=e)},null,8,["class","modelValue"]),(0,a.bF)(de,{name:"地址",class:"invalid-feedback"})]),(0,a.Lk)("div",x,[_,(0,a.bo)((0,a.Lk)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":l[10]||(l[10]=e=>r.form.message=e)},null,512),[[o.Jo,r.form.message]])]),(0,a.Lk)("div",I,[(0,a.Lk)("button",{class:"btn btn-danger",disabled:"on"===this.status.loadingItem}," 下一步 : 最終資料確認 ",8,w)])])),_:1},8,["onSubmit"])),r.isPayView?((0,a.uX)(),(0,a.CE)("form",{key:1,class:"col-md-6",onSubmit:l[11]||(l[11]=(0,o.D$)(((...e)=>i.Ordered&&i.Ordered(...e)),["prevent"]))},[V,(0,a.Lk)("table",C,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[F,(0,a.Lk)("td",null,(0,s.v_)(r.orderInfo.user.name),1)]),(0,a.Lk)("tr",null,[E,(0,a.Lk)("td",null,(0,s.v_)(r.orderInfo.user.email),1)]),(0,a.Lk)("tr",null,[$,(0,a.Lk)("td",null,(0,s.v_)(r.orderInfo.user.tel),1)]),(0,a.Lk)("tr",null,[M,(0,a.Lk)("td",null,(0,s.v_)(r.orderInfo.user.address),1)]),(0,a.Lk)("tr",null,[O,(0,a.Lk)("td",null,(0,s.v_)(r.orderInfo.message),1)]),(0,a.Lk)("tr",null,[R,r.cart.final_total!==r.cart.total?((0,a.uX)(),(0,a.CE)("td",X,(0,s.v_)(e.$numFilter.currency(r.cart.total-r.cart.final_total)),1)):((0,a.uX)(),(0,a.CE)("td",D,(0,s.v_)(e.$numFilter.currency(r.cart.total)),1))]),(0,a.Lk)("tr",null,[S,(0,a.Lk)("td",null,[r.orderInfo.is_paid?((0,a.uX)(),(0,a.CE)("span",U,"付款完成")):((0,a.uX)(),(0,a.CE)("span",Q,"尚未付款"))])])])]),q],32)):(0,a.Q3)("",!0),(0,a.Lk)("div",z,[(0,a.Lk)("div",A,[(0,a.Lk)("article",K,[(0,a.Lk)("h2",null,(0,s.v_)(r.cart.product.title),1),(0,a.Lk)("img",{src:r.cart.product.imageUrl,alt:"",class:"img-fluid mb-3"},null,8,P),(0,a.Lk)("div",null,(0,s.v_)(r.cart.product.category),1),(0,a.Lk)("div",null,(0,s.v_)(r.cart.product.content),1),(0,a.Lk)("div",null,[W,(0,a.eW)(" "+(0,s.v_)(r.cart.product.unit)+" · "+(0,s.v_)(r.cart.product.description)+"則評價 ",1)])]),(0,a.Lk)("table",j,[B,(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[J,G,H,(0,a.Lk)("td",null,(0,s.v_)(r.cart.qty)+" 間",1)])]),N]),r.isPayView?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(ce,{key:0,class:"col-md-6",onSubmit:i.addCouponCode},{default:(0,a.k6)((({errors:e})=>[(0,a.Lk)("div",T,[(0,a.bF)(ie,{id:"coupon",name:"優惠碼",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e["優惠碼"]}]),modelValue:r.coupon_code,"onUpdate:modelValue":l[12]||(l[12]=e=>r.coupon_code=e),placeholder:"請輸入優惠碼",rules:"required",style:{width:"100px"}},null,8,["class","modelValue"]),(0,a.bF)(de,{name:"優惠碼",class:"invalid-feedback"}),(0,a.Lk)("div",Y,[(0,a.Lk)("button",{class:"btn btn-outline-secondary",disabled:"on"===this.status.loadingItem},["on"===this.status.loadingItem?((0,a.uX)(),(0,a.CE)("div",ee,te)):(0,a.Q3)("",!0),(0,a.eW)(" 套用優惠碼 ")],8,Z)])])])),_:1},8,["onSubmit"])),(0,a.Lk)("table",ae,[r.cart.coupon?((0,a.uX)(),(0,a.CE)("div",se,"已套用優惠券")):(0,a.Q3)("",!0),(0,a.Lk)("div",oe," 總金額："+(0,s.v_)(e.$numFilter.currency(r.cart.total)),1),r.cart.final_total!==r.cart.total?((0,a.uX)(),(0,a.CE)("div",ne," 優惠券折扣： -"+(0,s.v_)(e.$numFilter.currency(r.cart.final_total)),1)):(0,a.Q3)("",!0),r.cart.final_total!==r.cart.total?((0,a.uX)(),(0,a.CE)("div",re," 折扣後總金額："+(0,s.v_)(e.$numFilter.currency(r.cart.total-r.cart.final_total)),1)):(0,a.Q3)("",!0)])])])])])],64)}t(4114);var de={data(){return{isLoading:!1,cart:{product:{}},status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},orderInfo:{user:{}},createOrderInfo:{},coupon_code:"",isPayView:!1}},created(){this.id=this.$route.params.roomId,this.getRoomdata()},methods:{onclickReturn(){this.$router.go(-1)},handleKeyDown(e){"Enter"!==e.key&&" "!==e.key||e.preventDefault()},handleMouseEnter(e){const l=e;l.target.style.transform="scale(1.2)"},handleMouseLeave(e){const l=e;l.target.style.transform="scale(1)"},getRoomdata(){const e="https://vue3-course-api.hexschool.io/api/airstay/cart";this.isLoading=!0,this.$http.get(e).then((e=>{e.data.success?(console.log("訂房頁面 取得資料成功",e),this.cart=e.data.data.carts[0]):console.log("訂房頁面 取得資料失敗"),this.isLoading=!1}))},createOrder(){const e="https://vue3-course-api.hexschool.io/api/airstay/order";this.isLoading=!0,this.$http.post(e,{data:this.form}).then((e=>{e.data.success?(this.createOrderInfo=e.data,this.isPayView=!0,this.getOrderInfo(),console.log("用戶端 建立訂單成功",e.data)):console.log("用戶端 建立訂單失敗"),this.isLoading=!1}))},getOrderInfo(){const e=`https://vue3-course-api.hexschool.io/api/airstay/order/${this.createOrderInfo.orderId}`;this.isLoading=!0,this.$http.get(e).then((e=>{e.data.success?(this.orderInfo=e.data.order,console.log("用戶端 取得訂單資訊成功",e.data.order)):console.log("用戶端 取得訂單資訊失敗"),this.isLoading=!1}))},Ordered(){const e=`https://vue3-course-api.hexschool.io/api/airstay/pay/${this.createOrderInfo.orderId}`;this.isLoading=!0,this.$http.post(e).then((e=>{e.data.success?(this.$router.push(`../ordered/${this.createOrderInfo.orderId}`),console.log("用戶端 付款成功",e.data)):console.log("用戶端 付款失敗"),this.isLoading=!1}))},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/airstay/coupon";this.status.loadingItem="on";const l={code:this.coupon_code};this.$http.post(e,{data:l}).then((e=>{e.data.success?(this.getRoomdata(),console.log("用戶端 套用優惠券成功",e.data)):console.log("用戶端 套用優惠券失敗"),this.status.loadingItem=""}))}}},ce=t(1241);const ue=(0,ce.A)(de,[["render",ie]]);var me=ue},2009:function(e,l,t){e.exports=t.p+"img/loadingAni.04376c8d.gif"}}]);
//# sourceMappingURL=854.e8b12432.js.map